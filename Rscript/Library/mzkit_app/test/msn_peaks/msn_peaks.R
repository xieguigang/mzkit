require(mzkit);

imports "SingleCells" from "mzkit";

let NC = [
    "F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L72.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L73.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L74.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L75.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L76.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L77.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L78.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L79.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L80.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L61.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L62.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L63.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L64.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L65.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L66.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L67.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L68.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L69.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L70.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L71.mzML"
];

let Prostate_cancer = [
    "F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L12.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L13.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L14.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L15.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L16.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L17.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L18.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L19.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L20.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L1.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L2.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L3.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L4.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L5.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L6.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L7.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L8.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L9.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L10.mzML"
"F:\datapool\MTBLS6039\FILES\DERIVED_FILES\POS\L11.mzML"
];



let data = lapply(tqdm(append(NC, Prostate_cancer)), file -> open.mzpack(file));

data = msn_matrix(data);
data = as.data.frame(data, singlecell = TRUE);

print(data);

write.csv(data, file = relative_work("msn.csv"));


